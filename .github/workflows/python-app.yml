name: Build and Validate ExoVista Web App

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

permissions:
  contents: read

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: â¬‡ï¸ Checkout code
      uses: actions/checkout@v4
      
    - name: ğŸ Set up Python
      # Use a stable version of Python for the data handling backend
      uses: actions/setup-python@v5
      with:
        python-version: '3.10'
        
    - name: ğŸ“¦ Install Python Dependencies
      run: |
        python -m pip install --upgrade pip
        # Install necessary tools (e.g., pandas, matplotlib, Flask/Django, if used)
        if [ -f requirements.txt ]; then 
          pip install -r requirements.txt
        else
          echo "No requirements.txt found. Skipping Python dependency installation."
        fi

    - name: ğŸ—ï¸ Build Web Application (Frontend)
      # This is a placeholder. You would replace this with actual build commands
      # if the web app uses a frontend framework like React, Vue, or Next.js.
      # Example: If using Node.js for the frontend:
      # run: |
      #   npm install
      #   npm run build
      run: |
        echo "Assuming web app build is managed by Python (e.g., Streamlit/Flask)"
        echo "If a separate build step is needed (like 'npm run build'), update this step."

    - name: ğŸ§¹ Lint Check (Flake8)
      # Check the quality of any Python scripts in the project
      run: |
        pip install flake8
        flake8 . --count --select=E9,F63,F7,F82 --show-source --statistics
        flake8 . --count --exit-zero --max-complexity=10 --max-line-length=127 --statistics

    # If you later decide to add tests, you can re-enable this:
    # - name: ğŸ§ª Run Web App Tests
    #   run: |
    #     # Example: Run Python tests or Cypress/Selenium tests
    #     echo "Tests run successfully."
